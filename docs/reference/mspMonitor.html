<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Real-Time Process Monitoring Function — mspMonitor â€¢ mvMonitoring</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">mvMonitoring</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/MVSPC-Workflow.html">Multivariate Statistical Process Control with mvMonitoring</a>
    </li>
    <li>
      <a href="../articles/Simulation_Vignette.html">MSAD-PCA Walkthrough</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Real-Time Process Monitoring Function</h1>
    </div>

    
    <p>Monitor and flag (if necessary) incoming multivariate process
  observations.</p>
    

    <pre class="usage"><span class='fu'>mspMonitor</span>(<span class='no'>observations</span>, <span class='no'>labelVector</span>, <span class='no'>trainingSummary</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>observations</th>
      <td><p>an n x p xts matrix. For real-time monitoring via a
script within a batch file, n = 1, so this must be a 1 x p matrix. If lags
were included at the training step, then these observations will also have
lagged features.</p></td>
    </tr>
    <tr>
      <th>labelVector</th>
      <td><p>an n x 1 integer vector of class memberships</p></td>
    </tr>
    <tr>
      <th>trainingSummary</th>
      <td><p>the TrainingSpecs list returned by the mspTrain()
function. This list contains---for each class---the SPE and T2 thresholds,
as well the projection matrix.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Lazy dots for additional internal arguments</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An n x (p + 5) xts matrix, where the last five columns are:</p><ul>
<li><p>SPE -- the SPE statistic value for each observation
      in "observations"</p></li>
<li><p>SPE_Flag -- a vector of SPE indicators recording 0 if the test
      statistic is less than or equal to the critical value passed through
      from the threshold object</p></li>
<li><p>T2 -- the T2 statistic value for each observation in
      "observations"</p></li>
<li><p>T2_Flag -- a vector of T2 fault indicators, defined like
      SPE_Flag</p></li>
<li><p>Alarm -- a column indicating if there have been three flags in a
      row for either the SPE or T2 monitoring statistics or both. Alarm
      states are as follows: 0 = no alarm, 1 = Hotelling's T2 alarm, 2 =
      Squared Prediction Error alarm, and 3 = both alarms.</p></li>
</ul>

    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function is designed to be run at specific time intervals
  (e.g.every 10 seconds, 30 seconds, 1 minute, 5 minutes, 10 minutes) through
  a scheduled operating script which calls this function and mspWarning(). We
  expect this script to be set up in Windows "Task Scheduler" or Macintosh OX
  "launchd" application suites. This function takes in the specific
  observations to monitor and their class memberships (if any) and returns an
  xts matrix of these observation columns concatenated with their monitoring
  statistic values, flag statuses, and an empty alarm column. Users should
  then append these rows onto a previously existing matrix of daily
  observations. The mspWarning() function will then take in the daily
  observation xts matrix with updated rows returned by this function and
  check the monitoring statistic flag indicators to see if an alarm status
  has been reached. For further details, see the mspWarning() function.</p>
<p>This function calls the faultDetect() function, and requires the training
information returned by the mspTrain function. This function will return
the xts matrix necessary for the mspWarning() function.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p>Calls: <code><a href='faultDetect.html'>faultDetect</a></code>. Pipe flow: <code><a href='mspTrain.html'>mspTrain</a></code>
  into <code>mspMonitor</code> into <code><a href='mspWarning.html'>mspWarning</a></code>.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>nrml</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='mspProcessData.html'>mspProcessData</a></span>(<span class='kw'>faults</span> <span class='kw'>=</span> <span class='st'>"NOC"</span>)
<span class='no'>n</span> <span class='kw'>&lt;-</span> <span class='fu'>nrow</span>(<span class='no'>nrml</span>)

<span class='co'># Calculate the training summary, but save five observations for monitoring.</span>
<span class='no'>trainResults_ls</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='mspTrain.html'>mspTrain</a></span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>nrml</span>[<span class='fl'>1</span>:(<span class='no'>n</span> - <span class='fl'>5</span>), -<span class='fl'>1</span>],
                            <span class='kw'>labelVector</span> <span class='kw'>=</span> <span class='no'>nrml</span>[<span class='fl'>1</span>:(<span class='no'>n</span> - <span class='fl'>5</span>), <span class='fl'>1</span>],
                            <span class='kw'>trainObs</span> <span class='kw'>=</span> <span class='fl'>4320</span>)

<span class='co'># While training, we included 1 lag (the default), so we will also lag the</span>
<span class='co'># observations we will test.</span>
<span class='no'>testObs</span> <span class='kw'>&lt;-</span> <span class='no'>nrml</span>[(<span class='no'>n</span> - <span class='fl'>6</span>):<span class='no'>n</span>, -<span class='fl'>1</span>]
<span class='no'>testObs</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>xts</span><span class='kw ns'>:::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/xts/topics/diff'>lag.xts</a></span>(<span class='no'>testObs</span>, <span class='fl'>0</span>:<span class='fl'>1</span>)
<span class='no'>testObs</span> <span class='kw'>&lt;-</span> <span class='no'>testObs</span>[-<span class='fl'>1</span>,]
<span class='no'>testObs</span> <span class='kw'>&lt;-</span> <span class='fu'>cbind</span>(<span class='no'>nrml</span>[(<span class='no'>n</span> - <span class='fl'>5</span>):<span class='no'>n</span>, <span class='fl'>1</span>], <span class='no'>testObs</span>)

<span class='fu'>mspMonitor</span>(<span class='kw'>observations</span> <span class='kw'>=</span> <span class='no'>testObs</span>[, -<span class='fl'>1</span>],
           <span class='kw'>labelVector</span> <span class='kw'>=</span> <span class='no'>testObs</span>[, <span class='fl'>1</span>],
           <span class='kw'>trainingSummary</span> <span class='kw'>=</span> <span class='no'>trainResults_ls</span>$<span class='no'>TrainingSpecs</span>)</div><div class='output co'>#&gt;                             x           y          z       x.1         y.1
#&gt; 2015-05-23 09:54:00 0.1764313 0.002505337 0.04669791 0.2314921 0.029390745
#&gt; 2015-05-23 09:55:00 0.2171308 0.034776156 0.10174248 0.1764313 0.002505337
#&gt; 2015-05-23 09:56:00 0.2310036 0.052411939 0.04394506 0.2171308 0.034776156
#&gt; 2015-05-23 09:57:00 0.2158249 0.034996809 0.04549180 0.2310036 0.052411939
#&gt; 2015-05-23 09:58:00 0.2256942 0.061892007 0.10046995 0.2158249 0.034996809
#&gt; 2015-05-23 09:59:00 0.2495755 0.049390161 0.02304906 0.2256942 0.061892007
#&gt;                             z.1      SPE SPE_Flag       T2 T2_Flag Alarm
#&gt; 2015-05-23 09:54:00 -0.08096178 4.529587        0 14.08045       0    NA
#&gt; 2015-05-23 09:55:00  0.04669791 3.139423        0 11.91071       0    NA
#&gt; 2015-05-23 09:56:00  0.10174248 2.634757        0 10.96726       0    NA
#&gt; 2015-05-23 09:57:00  0.04394506 3.056371        0 11.77885       0    NA
#&gt; 2015-05-23 09:58:00  0.04549180 3.167394        0 10.66463       0    NA
#&gt; 2015-05-23 09:59:00  0.10046995 1.869880        0 10.45847       0    NA</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Melissa Johnson, Gabriel Odom, Ben Barnard, Karen Kazor, Amanda Hering.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
