<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Process Alarms — mspWarning â€¢ mvMonitoring</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">mvMonitoring</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/MVSPC-Workflow.html">Multivariate Statistical Process Control with mvMonitoring</a>
    </li>
    <li>
      <a href="../articles/Simulation_Vignette.html">MSAD-PCA Walkthrough</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Process Alarms</h1>
    </div>

    
    <p>Trigger an alarm, if necessary, for incoming multivariate
  process observations.</p>
    

    <pre class="usage"><span class='fu'>mspWarning</span>(<span class='no'>mspMonitor_object</span>, <span class='kw'>faultsToTriggerAlarm</span> <span class='kw'>=</span> <span class='fl'>5</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>mspMonitor_object</th>
      <td><p>An xts matrix returned by the mspMonitor() function</p></td>
    </tr>
    <tr>
      <th>faultsToTriggerAlarm</th>
      <td><p>Specifies how many sequential faults will cause
an alarm to trigger. Defaults to 5.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An xts matrix of the same dimensions as mspMonitor_object, with a
  recorded negative or positive and type-specific alarm status. Alarm codes
  are: 0 = no alarm, 1 = Hotelling's T2 alarm, 2 = Squared Prediction Error
  alarm, and 3 = both alarms.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function and the mspMonitor() function are designed to be ran
  via a scheduled task through Windows "Task Scheduler" or Macintosh OX
  "launchd" application suites. The file flow is as follows: at each time
  interval, run the mspMonitor() function on the matrix of daily observations
  to add a flag status to the most recent incoming observation in the matrix,
  and return this new xts matrix. Then, pass this updated daily observation
  matrix to the mspWarning() function, which will check if the process has
  recorded three or more sequential monitoring statistic flags in a row. Of
  note, because these functions are expected to be repeatedly called in real
  time, this function will only check for an alarm within the last row of the
  xts matrix. To check multiple rows for an alarm state, please use the
  mspTrain() function, which was designed to check multiple past
  observations.</p>
<p>This function requires an xts matrix returned by the mspMonitor() function.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p>Pipe flow: <code><a href='mspTrain.html'>mspTrain</a></code> into <code><a href='mspMonitor.html'>mspMonitor</a></code>
  into <code>mspWarning</code>.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>nrml</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='mspProcessData.html'>mspProcessData</a></span>(<span class='kw'>faults</span> <span class='kw'>=</span> <span class='st'>"NOC"</span>)
<span class='no'>n</span> <span class='kw'>&lt;-</span> <span class='fu'>nrow</span>(<span class='no'>nrml</span>)

<span class='co'># Calculate the training summary, but save five observations for monitoring.</span>
<span class='no'>trainResults_ls</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='mspTrain.html'>mspTrain</a></span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>nrml</span>[<span class='fl'>1</span>:(<span class='no'>n</span> - <span class='fl'>5</span>), -<span class='fl'>1</span>],
                            <span class='kw'>labelVector</span> <span class='kw'>=</span> <span class='no'>nrml</span>[<span class='fl'>1</span>:(<span class='no'>n</span> - <span class='fl'>5</span>), <span class='fl'>1</span>],
                            <span class='kw'>trainObs</span> <span class='kw'>=</span> <span class='fl'>4320</span>)

<span class='co'># While training, we included 1 lag (the default), so we will also lag the</span>
<span class='co'># observations we will test.</span>
<span class='no'>testObs</span> <span class='kw'>&lt;-</span> <span class='no'>nrml</span>[(<span class='no'>n</span> - <span class='fl'>6</span>):<span class='no'>n</span>, -<span class='fl'>1</span>]
<span class='no'>testObs</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>xts</span><span class='kw ns'>:::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/xts/topics/diff'>lag.xts</a></span>(<span class='no'>testObs</span>, <span class='fl'>0</span>:<span class='fl'>1</span>)
<span class='no'>testObs</span> <span class='kw'>&lt;-</span> <span class='no'>testObs</span>[-<span class='fl'>1</span>,]
<span class='no'>testObs</span> <span class='kw'>&lt;-</span> <span class='fu'>cbind</span>(<span class='no'>nrml</span>[(<span class='no'>n</span> - <span class='fl'>5</span>):<span class='no'>n</span>, <span class='fl'>1</span>], <span class='no'>testObs</span>)

<span class='co'># Run the monitoring function.</span>
<span class='no'>dataAndFlags</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='mspMonitor.html'>mspMonitor</a></span>(<span class='kw'>observations</span> <span class='kw'>=</span> <span class='no'>testObs</span>[, -<span class='fl'>1</span>],
                           <span class='kw'>labelVector</span> <span class='kw'>=</span> <span class='no'>testObs</span>[, <span class='fl'>1</span>],
                           <span class='kw'>trainingSummary</span> <span class='kw'>=</span> <span class='no'>trainResults_ls</span>$<span class='no'>TrainingSpecs</span>)

<span class='co'># Alarm check the last row of the matrix returned by the mspMonitor function</span>
<span class='fu'>mspWarning</span>(<span class='no'>dataAndFlags</span>)</div><div class='output co'>#&gt;                             x          y            z       x.1        y.1
#&gt; 2015-05-23 09:54:00 0.1199682 0.00247014  0.041183509 0.1321447 0.03136360
#&gt; 2015-05-23 09:55:00 0.1138535 0.01537853  0.015611471 0.1199682 0.00247014
#&gt; 2015-05-23 09:56:00 0.1702870 0.02349061  0.079247525 0.1138535 0.01537853
#&gt; 2015-05-23 09:57:00 0.1982922 0.04833615  0.081870953 0.1702870 0.02349061
#&gt; 2015-05-23 09:58:00 0.2006981 0.04154680 -0.005721085 0.1982922 0.04833615
#&gt; 2015-05-23 09:59:00 0.2079140 0.02794911 -0.057844524 0.2006981 0.04154680
#&gt;                              z.1      SPE SPE_Flag       T2 T2_Flag Alarm
#&gt; 2015-05-23 09:54:00 -0.020886126 9.263416        1 18.09932       0    NA
#&gt; 2015-05-23 09:55:00  0.041183509 9.878314        1 18.21206       0    NA
#&gt; 2015-05-23 09:56:00  0.015611471 6.173057        1 15.37955       0    NA
#&gt; 2015-05-23 09:57:00  0.079247525 4.984703        0 13.25881       0    NA
#&gt; 2015-05-23 09:58:00  0.081870953 4.458017        0 13.57401       0    NA
#&gt; 2015-05-23 09:59:00 -0.005721085 3.654876        0 14.00404       0     0</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Melissa Johnson, Gabriel Odom, Ben Barnard, Karen Kazor, Amanda Hering.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
